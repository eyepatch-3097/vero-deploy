{% extends "base.html" %}
{% block title %}Credits Wallet{% endblock %}
{% block content %}

<style>
  :root{
    --fg:#fff; --soft:#cfd5ff;
    --glass:rgba(255,255,255,.08); --glass-bd:rgba(255,255,255,.18);
    --good:#30d158; --bad:#ff453a;
  }
  body{ font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; color:var(--fg); }

  /* Full-page background */
  .page-bg::before{
    content:""; position:fixed; inset:0; z-index:-1;
    background:
      linear-gradient(180deg, rgba(6,8,20,.82), rgba(6,8,20,.82)),
      url("https://i.pinimg.com/1200x/a5/44/1a/a5441a6ea62505b1655bd7b8d43ce2d3.jpg") center/cover no-repeat;
    filter:saturate(1.05) blur(1px);
  }

  .wrap{ max-width:1100px; margin:10px auto 40px; padding:0 16px; }

  /* Hero */
  .hero{ text-align:center; margin:6px 0 18px; }
  .hero h1{ font-weight:400; letter-spacing:.2px; margin:.25rem 0 .3rem; }
  .hero h1{ font-family:"Instrument Serif", serif;font-weight:400; font-size: 4rem; margin-top:2rem; margin-bottom: 2rem; }
  .hero p{ color:var(--soft); margin:0; }

  /* Glass cards */
  .cardx{
    position:relative; border-radius:18px; background:var(--glass);
    border:1px solid var(--glass-bd); backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
    box-shadow:0 10px 30px rgba(0,0,0,.28);
  }
  .cardx-body{ padding:18px 20px; }

  /* Balance pill */
  .balance{
    display:flex; align-items:center; gap:14px; justify-content:space-between; flex-wrap:wrap;
  }
  .pill{
    display:inline-flex; align-items:center; gap:.6rem; padding:.55rem 1rem; border-radius:999px;
    background:linear-gradient(90deg, rgba(124,128,255,.25), rgba(35,166,213,.25));
    border:1px solid rgba(255,255,255,.28); font-weight:800;
  }
  .big{
    font-size:2.25rem; font-weight:900;
    background:linear-gradient(90deg,#6a5cff,#23a6d5);
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }

  /* History list */
  .hlist{ margin-top:14px; }
  .hrow{
    display:grid; grid-template-columns:120px 150px 100px 110px 1fr;
    gap:12px; align-items:center; padding:12px 16px;
    border-top:1px solid rgba(255,255,255,.10);
  }
  .hrow:first-child{ border-top:0; }
  .hrow:nth-child(odd){ background:rgba(255,255,255,.04); }
  .date{ color:var(--soft); line-height:1.2; }
  .type{ font-weight:700; }
  .amt{ font-weight:900; }
  .amt.good{ color:var(--good); }
  .amt.bad{ color:var(--bad); }
  .bal{ color:var(--soft); }
  .note{ color:var(--fg); opacity:.9; }

  @media (max-width: 900px){
    .hrow{ grid-template-columns:110px 90px 80px 1fr; }
    .hide-md{ display:none; }
  }
</style>

<div class="page-bg"></div>
<div class="wrap">

  <div class="hero">
    <h1>Your Credits</h1>
    <p>Track your balance and see every debit/credit at a glance.</p>
  </div>

  <!-- Balance card -->
  <section class="cardx mb-3">
    <div class="cardx-body balance">
      <div class="pill">Current Balance</div>
      <div class="big">{{ balance }}</div>
      {# Keep your mock top-up form hidden or add your real purchase CTA here #}
      {# <form method="post" action="{% url 'mock_add_credits' %}">{% csrf_token %}<button class="btn btn-success btn-sm">Add 10</button></form> #}
    </div>
  </section>

  <!-- History card -->
  <section class="cardx">
    <div class="cardx-body">
      <div class="pill" style="margin-bottom:8px;">Transaction History</div>

      {% if transactions %}
        <div class="hlist">
          {% for t in transactions %}
            <div class="hrow">
              <div class="date">{{ t.created_at|date:"Y-m-d" }}<br><span class="hide-md">{{ t.created_at|date:"H:i" }}</span></div>
              <div class="type">{{ t.get_kind_display }}</div>
              <div class="amt {% if t.amount < 0 %}bad{% else %}good{% endif %}">
                {% if t.amount > 0 %}+{% endif %}{{ t.amount }}
              </div>
              <div class="bal">Bal: {{ t.balance_after }}</div>
              <div class="note">{{ t.note }}</div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted mb-0">No transactions yet.</p>
      {% endif %}
    </div>
  </section>

</div>
{% endblock %}
